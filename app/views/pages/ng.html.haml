- content_for :title do
  ng

- content_for :head do
  = stylesheet_link_tag 'ng'

- content_for :script do
  = javascript_include_tag 'jquery.autosize'
  = javascript_include_tag 'jquery.timeago'
  = javascript_include_tag 'ng'

.row(ng-controller="resourcesCtrl")
  .row(style="position:relative")
    .alert-box.alert(data-alert style="display:none")
      %a(href="javascript:location.reload()")
        reload
      %i.icon-info-sign
      Something went wrong!

  .large-4.columns
    .panel.radius
      .section-container.vertical-nav
        %section.section(ng-repeat="user in users")
          %p.title
            %a.glow(id="user-{{user.id}}" ng-click="userLogin(user.id)")
              %span.name(ng-bind="user.name")

  #all-posts.large-8.columns(ng-cloak)
    #post-panel.panel.radius(ng-show="loggedInUser.id")
      %form
        %img.radius(ng-src="{{loggedInUser.picture}}")
        %textarea(ng-model="postMessage" placeholder="Enter some text")
        %a.small.button(ng-click="postSubmit()") Send
    .panel.radius(ng-repeat="post in posts" id="post-{{post.id}}"
                  ng-mouseenter="showDelete(post.id, post.user_id==loggedInUser.id)"
                  ng-mouseleave="showDelete(post.id, false)")
      .row
        .large-2.columns
          %img.radius(ng-src="{{users[post.user_id].picture}}")
        .large-10.columns
          %time.timeago(datetime="{{post.updated_at}}" ng-bind="properTime(post.updated_at)")
          %a.delete-button(ng-click="deletePost(post.id)")
            %i.icon-remove-sign
          %pre(ng-bind="post.msg")
          %div(id="post-{{reply.id}}"
               ng-repeat="reply in post.replies.reversed()"
               ng-mouseenter="showDelete(reply.id, reply.user_id==loggedInUser.id)"
               ng-mouseleave="showDelete(reply.id, false)")
            %hr
            .row
              .large-2.columns
                %img.radius(ng-src="{{users[reply.user_id].picture}}")
              .large-10.columns
                %time.timeago(datetime="{{reply.updated_at}}" ng-bind="properTime(reply.updated_at)")
                %a.delete-button(ng-click="deletePost(reply.id)")
                  %i.icon-remove-sign
                %pre(ng-bind="reply.msg")
      .row.reply-placeholder(ng-show="loggedInUser.id")
        .large-10.large-offset-2.columns
          %p(ng-click="showReply(post.id)") reply
      .row.reply-box.hide
        .large-2.columns
          %img.radius(ng-src="{{loggedInUser.picture}}")
        .large-10.columns
          %form(ng-show="loggedInUser.id")
            .row.collapse
              .large-10.columns
                %textarea(id="reply-{{post.id}}")
              .large-2.columns
                %a.button.secondary.small(ng-click="replyClick(post.id)")
                  Reply

